<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
       body{font-family:sans-serif;font-size:0.8em;}
      .axis path, .axis line {fill:none;stroke:silver;shape-rendering:crispEdges;}
      .x.axis path  { displayx: none;}
      .axis text {font-size:0.8em;}
      .line {fill: none;stroke: steelblue;stroke-width: 1.5px;}

.overlay {
  fill: none;
  pointer-events: all;
}
      path.lt {stroke-width:1px;}
      path.lt1 {stroke:#da70d6;fill:none;}
      path.lt2 {stroke:#ff8c00;fill:none;}
      path.lt3 {stroke:#32cd32;fill:none;}
      path.lt4 {stroke:#1e90ff;fill:none;}  
      path.ltHighlite {stroke-width:3px;}  
    </style>
    <script src="./res/d3.js"></script>
    <script>
      
      
var DATA = {
  "cats":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],
  "vals":[
    {
    "l":"ACCEPT",
    "fc":[9,52,99,83,4,86,39,68,97,38,99,12,17,38,66,12,72,54,10,12,87,38,2,28,15,48,75,16,6,70],
    "fct":1137,
    "nc":[172,21,146,211,274,146,226,229,237,114,217,178,213,280,274,137,34,128,81,111,23,17,60,113,64,247,183,110,242,170],
    "nct":3706,
    "uc":[190,151,188,102,189,25,82,295,262,164,175,13,248,166,30,110,282,170,129,75,148,30,244,25,103,250,124,151,58,178],
    "uct":3596,
    "fa":[922.64,230.89,681.11,128.63,451.38,10.87,621.13,282.17,51.98,470.24,51.56,591.05,747.15,588.32,530.77,948.17,840,954.64,815.47,496.95,529.61,771.53,855.03,86.32,915.71,953.8,384.83,90.92,804.19,421.96],
    "fat":13573.32,
    "na":[4019.31,3345.1,2342.51,3862.67,3662.45,3832.88,3817.95,4172.71,3613.95,4734.21,1591.67,3750.68,389.64,3609.98,1802.86,2949.08,869.64,2095.9,3831.28,1519.99,1770.92,2844.39,246.85,4975.4,2858.83,4327.5,2947.74,2556.06,2447.3,1333.53],
    "nat":72510.85,
    "ua":[961.11,1423.35,203.13,1374.98,218.01,521.35,910.64,1116.11,325.27,537.27,700.52,313.3,1835.54,175,145.38,1387.11,700.79,109.85,1204.99,653.62,1785.25,810.98,1414.63,807.36,319.48,701.55,1601.23,1103.26,1952.12,311.09],
    "uat":19955.02
    },
    {
    "l":"REVIEW",
    "fc":[38,77,23,25,60,93,87,70,52,34,49,83,28,65,27,79,11,44,31,43,68,83,66,76,46,45,40,44,34,58],
    "fct":1358,
    "nc":[295,16,200,17,160,277,193,77,165,198,243,286,183,279,100,237,171,209,257,159,207,33,243,208,223,274,90,280,174,119],
    "nct":4636,
    "uc":[287,112,182,81,134,166,157,193,169,40,20,36,3,160,296,35,218,101,128,49,178,181,54,88,261,152,56,271,34,71],
    "uct":3329,
    "fa":[133.75,347.14,548.18,199.59,801.88,308.57,52.13,232.13,247.83,499.97,508.22,381.22,401.57,19.2,818.02,437.37,432.83,479.02,299.11,43.54,355.93,945.9,458.82,609.7,392.56,349.81,677.89,506.97,133.79,913.88],
    "fat":9954.18,
    "na":[4359.22,3237.15,4598.15,47.89,4745.84,2398.98,3700.76,2472.68,4694.28,3053.97,42.84,1149.99,2237.75,190.67,4013.71,2959.24,4188.18,3014.64,3551.6,3950.54,1712.57,2387.03,3115.62,4795.45,1922.54,499.99,1415.91,4205.93,878.25,4199.47],
    "nat":72541.29,
    "ua":[1448.53,1967.74,645.62,238.94,891.29,1520.34,1566.99,342.91,336.37,738.21,585.02,609.09,1785.63,1750.68,834.74,1993.04,459.36,122.33,334.59,1811.29,1683.38,539.12,228.26,939.68,255.7,1232.18,1884.35,648.93,1929.92,1128.11],
    "uat":23628.85
    },
    {
    "l":"OTHER",
    "fc":[9,76,80,65,96,31,44,56,63,2,48,97,28,79,23,31,14,4,66,6,15,14,45,95,30,81,59,79,46,10],
    "fct":1117,
    "nc":[115,101,141,120,45,55,238,278,128,239,10,265,277,181,70,202,38,210,182,192,194,297,116,45,228,202,127,226,46,196],
    "nct":3967,
    "uc":[109,173,119,216,50,36,32,99,29,269,292,113,169,170,90,194,208,17,209,165,242,173,22,189,164,141,271,196,41,286],
    "uct":3549,
    "fa":[862.81,321.28,702.91,748.43,897.28,44.43,400.3,849.84,678.74,242.47,384.65,431.85,847.1,33.37,85.49,468.23,626.68,815.96,324.13,227.29,662.26,794.67,214.76,892.56,289.74,420.73,432.47,134.59,595.82,228.36],
    "fat":12847.23,
    "na":[3252.31,3400.04,2655.85,2632.55,4954.55,517.67,3443.54,1839.54,462.07,2826.27,1712.13,4860.99,3766.17,2239.54,1040.41,821.05,3511.57,1704.62,4795.53,3637.93,2394.1,2772.28,1187.3,970.91,1861.85,1168.13,4221.13,562.79,4564.05,346.33],
    "nat":63260.77,
    "ua":[59.23,184.17,550.73,1548.62,1912.6,284.96,1427.17,238.55,1608.94,1098.93,211.52,645.76,467.46,1835.4,1350.09,1974.61,902.56,59.51,763.56,1866.96,166.74,1053.95,1886.89,1893.24,768.13,1455.44,1157.04,1536.55,785.79,1976.18],
    "uat":24760.28
    }
  ]
};      
      
      
      
      var TIMES_LOOKUP = ['8am','9am','10am','11am','12pm','1pm','2pm','3pm','4pm','5pm','6pm','7pm','8pm','9pm','10pm','11pm','12am','1am','2am','3am','4am','5am','6am','7am'];
    
      function renderTimelineData2() {
        // def canvas
        var w = 600,
            h = 100;
        var svg = d3.select('div#data2Trend').append('svg')
          .attr('width', w + 20)
          .attr('height', h + 40)
          .append("g")
          .attr("transform", "translate(" + 30 + "," + 20 + ")");
          // def data
        var data2 =
/*        
[
[{h:0,v:0},{h:1,v:0},{h:2,v:1},{h:3,v:2},{h:4,v:0},{h:5,v:2},{h:6,v:0},{h:7,v:0},{h:8,v:2},{h:9,v:0},{h:10,v:2},{h:11,v:4},{h:12,v:7},{h:13,v:4},{h:14,v:3},{h:15,v:32},{h:16,v:40},{h:17,v:7},{h:18,v:4},{h:19,v:0},{h:20,v:0},{h:21,v:0},{h:22,v:0},{h:23,v:0}],
[{h:0,v:0},{h:1,v:0},{h:2,v:0},{h:3,v:4},{h:4,v:0},{h:5,v:4},{h:6,v:2},{h:7,v:2},{h:8,v:11},{h:9,v:0},{h:10,v:0},{h:11,v:5},{h:12,v:0},{h:13,v:3},{h:14,v:1},{h:15,v:4},{h:16,v:0},{h:17,v:2},{h:18,v:1},{h:19,v:0},{h:20,v:0},{h:21,v:0},{h:22,v:2},{h:23,v:0}],
[{h:0,v:0},{h:1,v:0},{h:2,v:0},{h:3,v:0},{h:4,v:3},{h:5,v:1},{h:6,v:0},{h:7,v:0},{h:8,v:2},{h:9,v:0},{h:10,v:0},{h:11,v:2},{h:12,v:2},{h:13,v:4},{h:14,v:0},{h:15,v:6},{h:16,v:2},{h:17,v:2},{h:18,v:2},{h:19,v:0},{h:20,v:0},{h:21,v:0},{h:22,v:0},{h:23,v:0}]
];
*/
[
[0,0,1,2,0,2,0,0,2,0,2,4,7,4,3,32,40,7,4,0,0,0,0,0],
[0,0,0,4,0,4,2,2,11,0,0,5,0,3,1,4,0,2,1,0,0,0,2,0],
[0,0,0,0,3,1,0,0,2,0,0,2,2,4,0,6,2,2,2,0,0,0,0,0]
];

        // def scales, axes
        var x = d3.scale.linear().domain([0,23]).range([0, w]),
            y = d3.scale.linear().domain([0,40]).range([h,0]);
        var xAxis = d3.svg.axis()
            .scale(x)
            .tickFormat(function(d){return TIMES_LOOKUP[d];})
            .orient("bottom");
        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");
        // def line gen
        var line = d3.svg.line()
            .interpolate("basis")
            //.x(function(d,i) { console.log('x: ' + d.h+','+i);return x(d.h); })
            //.y(function(d,i) { console.log('y: ' + d.v+','+i);return y(d.v); });
            .x(function(d,i) { /*console.log('x: ' + d+','+i);*/return x(i); })
            .y(function(d,i) { /*console.log('y: ' + d+','+i);*/return y(d); });
        // gen overlay to act on mouse posn
        // def here so will be in bottom of dom object stack and not hide value lines
        svg.append("rect")
          .attr("class", "overlay")
          .attr("width", w)
          .attr("height", h)
          .on("mouseover", overlayMouseover)
          .on("mouseout", overlayMouseout)
          .on("mousemove", overlayMousemove);
        // gen the value lines, interactivity
        var group = svg.selectAll('path')
            .data(data2)
            .enter()
            .append('path')
            .attr("d", line)
            .attr("class", function(d,i) {return 'lt'+(2+i) + ' lt';})
            .on("mouseover", chartlineMouseover)
            .on("mouseout", chartlineMouseout);
      // add x axis
      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + h + ")")
          .call(xAxis);
      // add y axis
      svg.append("g")
          .attr("class", "y axis")
          .call(yAxis);
    
    var focus = svg.append("g")
          .style("display", "none")
    ;
    
     focus.append("line")
        .attr("class", "vert")
        .style("stroke", "blue")
        .style("stroke-dasharray", "3,3")
        .style("opacity", 0.5)
        .attr("y1", 0)
        .attr("y2", h)
        .attr("x1",0)
        .attr("x2",0)
        ;
     focus.append("line")
        .attr("class", "hor")
        .style("stroke", "blue")
        .style("stroke-dasharray", "3,3")
        .style("opacity", 0.5)
        .attr("y1", 0)
        .attr("y2", 0)
        .attr("x1",w)
        .attr("x2",0)
        ;        
     /*     
    focus.append("line")
        .attr("class", "y")
        .style("stroke", "blue")
        .style("stroke-dasharray", "3,3")
        .style("opacity", 0.5)
        .attr("x1", w)
        .attr("x2", w);          
    */      
      function overlayMouseover() {
        focus.style("display", null);
      }
      function overlayMouseout() {
        focus.style("display", "none");
      }
      function overlayMousemove() {
        var xCoord = d3.mouse(this)[0];
        var yCoord = d3.mouse(this)[1];
        var xCurr = TIMES_LOOKUP[d3.round(x.invert(xCoord))];
        var yCurr = d3.round(y.invert(yCoord),1);
        d3.select('div#stdout').text(xCoord + ',' + yCoord + ' ' + xCurr + ' ' + yCurr);
        focus.select(".vert").attr("transform", "translate(" + xCoord + ",0)");
        focus.select(".hor").attr("transform", "translate(0," + yCoord + ")");
      }
      function chartlineMouseover(d,i) {
          d3.select(this).classed("lt", false).classed('ltHighlite',true);
          //console.dir(this);
          
      }
      function chartlineMouseout(d,i) {
          d3.select(this).classed('ltHighlite',false).classed("lt", true);
          //console.dir(this);
          
      }    
    }    
    
    function init() {
      renderTimelineData2();
    }
    
    </script>
    
  </head>
  <body>

<div id="data2Trend" class="trendLineContainer" style="border:1px solid #c0c0c0;border-radius:4px;"></div>
<div id="stdout">stdout</div>
  <script>init();</script>
  http://bl.ocks.org/mbostock/3902569 <br />
  http://bl.ocks.org/WillTurman/4631136 <br />
  http://www.d3noob.org/2014/07/my-favourite-tooltip-method-for-line.html<br />
  
  </body>
</html>
